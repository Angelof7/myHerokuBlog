
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Git学习笔记 - VongLo's Dev Space</title>
	<meta name="author" content="VongLo">

	
	<meta name="description" content="git学习笔记">
	<meta name="keywords" content="git，git学习，wang9262,push，commit">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="360-site-verification" content="71c95173e5269a4d306def7ed27f2a48" />
	<meta name="baidu-site-verification" content="GXlqZbIq3a" />
	<link href="/atom.xml" rel="alternate" title="VongLo's Dev Space" type="application/atom+xml">
	
	<link rel="canonical" href="http://wang9262.github.io/blog/2013/12/01/git-study/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<script type="text/javascript">

function addBlankTargetForLinks () {

  $('a[href^="http"]').each(function(){

      $(this).attr('target', '_blank');

  });

}

$(document).bind('DOMNodeInserted', function(event) {

  addBlankTargetForLinks();

});

</script>

	
</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		document.write("<img src='/images/tx.png' alt='Profile Picture' style='width: 160px;' />");
	</script>
</div>
<h1><a href="/">VongLo's Dev Space</a></h1>
<p class="subtitle">寥寥浮生二十载,不求闻达<br>默默无闻，只求无愧于心</p>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">首页</a></li>
  <li><a href="/blog/archives">所有文章</a></li>
  <li><a href="/about">关于我</a></li>
</ul>


<section class="aboutme">
  <p>
    What makes you silent makes you silent.
  </p>
</section>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="weibo" href="http://www.weibo.com/3129068073" title="Weibo">Weibo</a>
		
		
		
		
		
		<a class="github" href="https://github.com/wang9262" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner"><article class="post" itemscope itemtype="http://schema.org/BlogPosting">
	<h1 class="title" itemprop="name">Git学习笔记</h1>
	<div class="entry-content" itemprop="articleBody"><p>   最近学习了一下git的基本命令，这篇文章是我自己的学习笔记，一来是为了分享，二来是为了以这种方式记下来，日后忘记时可以再来看看，本文会持续更新，把我在用git时遇到的问题以及一些比较好的建议记录下来，欢迎多多交流。</p>

<!--more-->


<p>
<img src="/images/blogimg/git/git.png" alt="" /></p>

<ol>
<li><a href="#1">git的大致思路</a></li>
<li><a href="#2">git的各种命令</a></li>
<li><a href="#3">分支</a></li>
<li><a href="#4">tag</a></li>
<li><a href="#5">更新</a></li>
<li><a href="#6">更多</a></li>
</ol>


<h3><a id="1"></a>git的大致思路</h3>

<p>   git分三个区，一个是History（历史记录），Working Directory（工作目录）以及Stage（缓存区）也叫Index（索引）。大致结构如下图所示</p>

<p>   <img src="/images/blogimg/git/threearea.png" alt="" /></p>

<p>   <img src="/images/blogimg/git/gitmode.png" alt="" /></p>

<p>   其中History可以看做是一根时间轴，上面布满了各种commit id，这些id都是hash生成的，可以不用去管它，理解成为标识符就好，如下图所示
   <img src="/images/blogimg/git/timebar.png" alt="" /></p>

<h3><a id="2"></a>git的各种基本命令</h3>

<h4>2.1 add命令</h4>

<p><code>git add filename</code>就是将当前工作路径下的filename文件添加到缓存区</p>

<h4>2.2 commit命令</h4>

<p><code>git commit -m ‘some commit info’</code>将某文件添加到缓存区后，在提交到历史记录，此时git会为你生成一个相应的commit id。</p>

<h4>2.3 log以及reflog命令</h4>

<p><code>git log</code>即查看提交日志，此时只有commit的记录没有头指针移动的记录如左图所示</p>

<p><img src="/images/blogimg/git/gitlog.png" alt="" /></p>

<p><code>git log --pretty=oneline</code>即以单行形式显示log日志，如图所示</p>

<p><img src="/images/blogimg/git/onelinelog.png" alt="" /></p>

<p><code>git reflog</code>即查看所有提交日志，以及其他的一些操作，简化了commit id
<img src="/images/blogimg/git/reflog.png" alt="" /></p>

<h4>2.4 回到上一次commit会回到指定的commit</h4>

<p><code>git reset --hard head^</code>回到上一个commit节点，这个有点HEAD类似C语言的指针，可以指向不同的commit id。
<code>git reset --hard commit_id(两杠之后无空格)</code>回到指定的commit节点（commit_id），这里的id时git reflog之后显示的commit id 并非log里面的id。</p>

<h4>2.5 恢复某个修改的文件</h4>

<p><code>git checkout -- fliename(两杠之后有空格)</code>，如果修改了某个文件，没有将其add到缓存区，调用该命令，可以恢复到修改之前的内容，即上一次commit之后的内容，如果这个时候已经add此语句无效，需要用下一语句。</p>

<p><img src="/images/blogimg/git/check_noadd.png" alt="" /></p>

<p><img src="/images/blogimg/git/check_noadd1.png" alt="" /></p>

<p><code>git reset head filename</code>和<code>git checkout -- filename</code>如果修改之后并且已经add到缓存区，则可用这两个语句来恢复到修改之前的文件。<code>git reset head filename</code>相当于取消了add，即将该文件从缓存区中删除了，有一点需要注意一下就是无论你add多少次（没有commit的前提下），仅需一次reset即可取消所有的add.下图是我自己在做试验时的截图。</p>

<p><img src="/images/blogimg/git/reset_add.png" alt="" /></p>

<p><img src="/images/blogimg/git/reset_add1.png" alt="" /></p>

<h4>2.6 删除</h4>

<p><code>rm filename</code>从此盘中删除某个文件，该操作可通过<code>git checkout -- filename</code>来恢复。<code>git rm filename</code>是从git目录下删除文件，该操作是无法恢复的（不管有没有commit都不能恢复），只能通过通过头指针指向上一个commit节点（见上面2.4）来实现恢复。</p>

<p><img src="/images/blogimg/git/disk_rm.png" alt="" /></p>

<p><img src="/images/blogimg/git/git_rm.png" alt="" /></p>

<h3><a id="3"></a>分支（Branch）</h3>

<p>分支在git中扮演着重要的角色，尤其是对于分布式的相互协作。下面看一些常用的branch分支命令</p>

<blockquote><ul>
<li><code>git remote add origin git_address</code>为本地git添加远程服务器。</li>
<li><code>git push -u origin(远程默认主分支) master(本地默认主分支)</code>第一次push加上<code>-u</code>指令，在以后的push中就可以直接push就行了</li>
<li><code>git branch</code>查看当前所处分支（带星号代表当前分支）</li>
<li><code>git branch branchname</code>创建新的分支</li>
<li><code>git check branchname</code>分支之间的切换</li>
<li><code>git checkout -b branchname</code>创建分支并直接切换到刚创建的分支，相当于上面两个命令的合并。</li>
</ul>
</blockquote>

<p>在一个分支里面（非主分支）里面新建、修改文件，只要没有add,commit操作，切回主分支的时候是可以看到刚刚新建、修改的文件，一旦add，commit之后在主分支是不可见的</p>

<h4>3.1 Merge（合并分支）命令</h4>

<blockquote><ul>
<li><code>git merge branchname</code>如果在主分支（master）下执行该命令，则直接合并master和branchname，master的头指针指向branchname的头指针（该操作并没有保存branchname，此时branchname和master相当于同一个分支）</li>
<li><code>git merge --no-ff -m 'merge information ' branchname</code>如果在主分支（master）下执行该命令则保存dev且将dev和master合并，可以理解为相当于在master里面复制了一份dev(推荐这种操作)</li>
</ul>
</blockquote>

<h4>3.2 删除分支</h4>

<blockquote><ul>
<li><code>git branch -d branchname</code>删除某个分支，无法恢复</li>
<li><code>git branch -D branchname</code>强制删除</li>
</ul>
</blockquote>

<h3><a id="4"></a>tag</h3>

<blockquote><ul>
<li><code>git tag tagname</code>创建tag</li>
<li><code>git check tag</code>检查当前所有tag</li>
<li><code>git push --tags</code>向远程提交tag</li>
<li><code>git tag -d tagname</code>删除本地tag</li>
<li><code>git push origin :refs/tags/tagname</code>删除远程tag</li>
</ul>
</blockquote>

<h3><a id="5"></a>更新</h3>

<h5>12月9号更新</h5>

<hr />

<h6>1.关于add和commit命令的合并</h6>

<p>可用命令<code>git commit -am 'commit info'</code>但是该命令只能对已经存在的文件执行，若有新增文件，则git会报错。</p>

<h6><a id="modify"></a>2.合并的问题</h6>

<p>如果在某个分支上修改了某文件，然后add->commit，再回到主分支对同一文件进行修改，在add->commit，此时若进行合并，则会报错说修改有冲突，如果此时查看冲突，则可以看见如图所示的东西(Git用&lt;&lt;&lt;&lt;&lt;&lt;&lt;，=======，>>>>>>>标记出不同分支的内容)。</p>

<p><img src="/images/blogimg/git/merge_modify.png" alt="" /></p>

<p>所以应该手动来修改,冲突修改好后，add->commit即可。修改完成后，history大致如图所示,也可以用<code>git log --graph --pretty=oneline --abbrev-commit</code>来产看合并之后的图表</p>

<p><img src="/images/blogimg/git/merge_pic.png" alt="" /></p>

<h6>3.重开分支</h6>

<p>假设现在在dev分支上将代码已经进行到一半了，突然想起有个很明显的bug，但是又不想放弃当前的代码修改，这时可以在当前分支用git stash命令来将当前工作现场隐藏起来，然后在主分支（或其他非dev分支）上新建分支来修复bug，修复完后合并到主分支，再转到dev分支
可以通过以下两种方法来恢复之前隐藏的内容</p>

<p><code>git stash apply</code>  恢复后，并没有删除stash隐藏的内容</p>

<p><code>git stash pop</code>  恢复并删除stash隐藏的内容</p>

<h6>4.远程推送</h6>

<p>向远程端push分支，<code>git push origin branchname</code></p>

<p>查看远程库信息 <code>git remote -v</code>
<code>git checkout -b branchname origin/branchname</code> 在本地创建一个与远程分支名字一致的分支，然后可以修改分支内容然后向远程push.
当远程库与本地库有冲突的时候，（即在不同的电脑上向远程库提交代码），需要先把远程库pull 下来，但是仅仅git pull是不够的
因为没有指定本地分支与远程分支的链接。</p>

<p>需要先执行<code>git branch --set-upstream branchname origin/branchname</code>,然后再执行git pull命令即可。如果此时有文件修改冲突，解决该冲突后在add commit 即可。此时再push到远程即可。这个和前面  <strong><em><a href="#modify">2.合并的问题</a></em></strong>  思路一致</p>

<h6>5.git的个性化</h6>

<p><code>git config --global color.ui true</code> // 显示颜色</p>

<p><code>git config --global alias.st status</code> // 为status设置别名,也可以为其他命令设置别名 <code>git config --global alias.othername commandname</code></p>

<p>也可以给一连串的命令设置别名.比如：<code>git config --global alias.unstage 'reset HEAD'</code>.</p>

<p>更多的个性化可参考<a href="http://git-scm.com/book/zh/%E8%87%AA%E5%AE%9A%E4%B9%89-Git-%E9%85%8D%E7%BD%AE-Git">7.1 自定义 Git &ndash; 配置 Git</a></p>

<h3><a id="6"></a>更多</h3>

<h5>各种dos/linux命令的解释</h5>

<hr />

<p><code>ls</code>查看当前路径下的文件（无隐藏文件）</p>

<p><code>ls -a</code>查看当前路径下所有的文件（含隐藏文件）</p>

<p><code>vi filename</code>用vim修改（或新建）文件（文件需带后缀，下同），进入vim后按下i键进入编辑模式，编辑完成按下esc，再输入<code>：wq</code>即可退出编辑模式</p>

<p><code>cat filename</code>显示文件内容</p>

<p><code>cat &gt;filename</code>只能创建新文件，不能编辑其内容</p>

<p><code>cd ..</code>返回上级目录，<code>cd .</code>当前目录,<code>cd /</code>回到根目录</p>

<p><code>pwd</code>查看当前目录的完整路径</p>

<h5>参考资料：</h5>

<blockquote><ul>
<li><a href="http://rogerdudler.github.io/git-guide/index.zh.html">rogerdudler</a></li>
<li><a href="http://www-cs-students.stanford.edu/~blynn/gitmagic/intl/zh_cn/">斯坦福大学</a></li>
<li><a href="http://marklodato.github.io/visual-git-guide/index-zh-cn.html#checkout">marklodato</a></li>
<li><a href="http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000">廖雪峰</a></li>
</ul>
</blockquote>
</div>

</article>

	<div class="share">
<!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
<a class="jiathis_button_tsina"></a>
<a class="jiathis_button_tqq"></a>
<a class="jiathis_button_renren"></a>
<a class="jiathis_button_qzone"></a>
<a href="http://www.jiathis.com/share?uid=1872349" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
<a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
var jiathis_config={
	data_track_clickback:true,
	summary:"",
	shortUrl:true,
	hideMore:false
}
</script>
<!-- JiaThis Button END -->

    
    
</div>


	

<DIV style="font-size:12px;BORDER-BOTTOM: #bbbbbb 1px solid; BORDER-LEFT: #bbbbbb 1px solid; BACKGROUND: #f6f6f6; HEIGHT: 120px; BORDER-TOP: #bbbbbb 1px solid; BORDER-RIGHT: #bbbbbb 1px solid" class=oec2003right> 
<DIV style="MARGIN-TOP: 10px; FLOAT: left; MARGIN-LEFT: 5px; MARGIN-RIGHT: 10px"> 
<IMG alt="" src="http://www.gravatar.com/avatar/f174b807078512e658f34796ff85c47d?s=160" width=100 height=100></DIV> 
<DIV style="LINE-HEIGHT: 200%; MARGIN-TOP: 10px; COLOR: #000000"> 

作者： <A href="http://wang9262.github.io">VongLo</A> <BR> 
出处： <A href="http://wang9262.github.io">http://wang9262.github.io</A> 
<BR>本文基于<a target="_blank" title="署名-非商业性使用-相同方式共享 3.0 中国大陆" href="http://creativecommons.org/licenses/by-nc-sa/3.0/cn/"> 
署名-非商业性使用-相同方式共享 3.0 中国大陆</a>许可协议发布<br/>欢迎转载，但未经作者同意必须保留此段声明，且在文章页面明显位置给出原文链接以及作者（上方两项信息）否则：保留追究法律责任的权利。 
</DIV></DIV> 


<section>
    <h1></h1>
    <div id="comments" aria-live="polite"><!-- Duoshuo Comment BEGIN -->
<div class="ds-thread" data-author-key=“1”></div>
<script type="text/javascript">
    var duoshuoQuery = {short_name:"wang9262"};
    (function() {
     var ds = document.createElement('script');
     ds.type = 'text/javascript';ds.async = true;
     ds.src = 'http://static.duoshuo.com/embed.js';
     ds.charset = 'UTF-8';
     (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
     })();
    </script>
<!-- Duoshuo Comment END --></div>
</section>
</div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2014- 
 <a href="/">VongLo</a>-
  <span class="credit">Powered by <a href="http://octopress.org/">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			

<script type="text/javascript">
      var disqus_shortname = 'wang9262';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://wang9262.github.io/blog/2013/12/01/git-study/';
        var disqus_url = 'http://wang9262.github.io/blog/2013/12/01/git-study/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>









<!-- JiaThis Button BEGIN -->
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js?uid=1872349" charset="utf-8"></script>

<!-- GoStats JavaScript Based Code -->
<script type="text/javascript" src="http://gostats.cn/js/counter.js"></script>
<script type="text/javascript">_gos='monster.gostats.cn';_goa=469994;
_got=7;_goi=3;_goz=0;_god='hits';_gol='';_GoStatsRun();</script>
<noscript><a target="_blank" title="" 
href="http://gostats.cn"><img alt="" 
src="http://monster.gostats.cn/bin/count/a_469994/t_7/i_3/z_0/show_hits/counter.png" 
style="border-width:0" /></a></noscript>
<!-- End GoStats JavaScript Based Code -->

		</div>
	</div>
</body>
</html>
